{"ast":null,"code":"import React from\"react\";import{useState}from\"react\";import{Link}from\"react-router-dom\";import Alert from\"./Alert\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function RequestPasswordResetToken(){const[email,setEmail]=useState(\"\");const[alert,setAlert]=useState({});const handleSubmit=async e=>{e.preventDefault();if(!email){setAlert({message:\"Email is required to reset password\",type:\"danger\"});return;}const url=\"http://localhost:8000/api/user/request_reset_password/\";const header={\"X-CSRFTOKEN\":getCookie(\"csrftoken\")};const formData=new FormData();formData.append(\"email\",email);try{const response=await fetch(url,{method:\"POST\",header,body:formData});if(!response.ok){const errorData=await response.json();setAlert({message:(errorData===null||errorData===void 0?void 0:errorData.error)||\"Password reset failed\",type:\"danger\"});}else{console.log(\"Password reset successful:\",response);setAlert({message:\"You will receive confirmation email to reset your password\",type:\"success\"});}}catch(error){setAlert({message:error.toString(),type:\"danger\"});console.error(\"Fetch error: \",error);}};const getCookie=name=>{let cookieValue=null;if(document.cookie&&document.cookie!==\"\"){const cookies=document.cookie.split(\";\");for(let i=0;i<cookies.length;i++){const cookie=cookies[i].trim();// Does this cookie string begin with the name we want?\nif(cookie.substring(0,name.length+1)===name+\"=\"){cookieValue=decodeURIComponent(cookie.substring(name.length+1));break;}}}return cookieValue;};return/*#__PURE__*/_jsxs(\"form\",{className:\"js-validation-reminder\",action:\"be_pages_auth_all.html\",method:\"POST\",children:[(alert===null||alert===void 0?void 0:alert.message)&&/*#__PURE__*/_jsx(Alert,{alert:alert}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group py-3\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control form-control-lg form-control-alt\",id:\"reminder-credential\",name:\"reminder-credential\",placeholder:\"Username or Email\",onChange:e=>setEmail(e.target.value)})}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group text-center\",children:[/*#__PURE__*/_jsxs(\"button\",{type:\"submit\",className:\"btn btn-block btn-hero-lg btn-hero-warning\",onClick:handleSubmit,children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-fw fa-reply mr-1\"}),\" Reset Password\"]}),/*#__PURE__*/_jsxs(\"p\",{className:\"mt-3 mb-0 d-lg-flex justify-content-lg-between\",children:[/*#__PURE__*/_jsxs(Link,{to:\"/sign_in\",className:\"btn btn-sm btn-light d-block d-lg-inline-block mb-1\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-sign-in-alt text-muted mr-1\"}),\"Sign In\"]}),/*#__PURE__*/_jsxs(Link,{to:\"/sign_up\",className:\"btn btn-sm btn-light d-block d-lg-inline-block mb-1\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-plus text-muted mr-1\"}),\"New Account\"]})]})]})]});}export default RequestPasswordResetToken;","map":{"version":3,"names":["React","useState","Link","Alert","jsx","_jsx","jsxs","_jsxs","RequestPasswordResetToken","email","setEmail","alert","setAlert","handleSubmit","e","preventDefault","message","type","url","header","getCookie","formData","FormData","append","response","fetch","method","body","ok","errorData","json","error","console","log","toString","name","cookieValue","document","cookie","cookies","split","i","length","trim","substring","decodeURIComponent","className","action","children","id","placeholder","onChange","target","value","onClick","to"],"sources":["/Users/mahadasif/Desktop/file_bee/frontend/src/components/RequestPasswordResetToken.jsx"],"sourcesContent":["import React from \"react\";\nimport { useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport Alert from \"./Alert\";\n\nfunction RequestPasswordResetToken() {\n  const [email, setEmail] = useState(\"\");\n  const [alert, setAlert] = useState({});\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n\n    if (!email) {\n      setAlert({\n        message: \"Email is required to reset password\",\n        type: \"danger\",\n      });\n      return;\n    }\n\n    const url = \"http://localhost:8000/api/user/request_reset_password/\";\n    const header = { \"X-CSRFTOKEN\": getCookie(\"csrftoken\") };\n    const formData = new FormData();\n    formData.append(\"email\", email);\n\n    try {\n      const response = await fetch(url, {\n        method: \"POST\",\n        header,\n        body: formData,\n      });\n\n      if (!response.ok) {\n        const errorData = await response.json();\n        setAlert({\n          message: errorData?.error || \"Password reset failed\",\n          type: \"danger\",\n        });\n      } else {\n        console.log(\"Password reset successful:\", response);\n        setAlert({\n          message: \"You will receive confirmation email to reset your password\",\n          type: \"success\",\n        });\n      }\n    } catch (error) {\n      setAlert({ message: error.toString(), type: \"danger\" });\n      console.error(\"Fetch error: \", error);\n    }\n  };\n\n  const getCookie = (name) => {\n    let cookieValue = null;\n    if (document.cookie && document.cookie !== \"\") {\n      const cookies = document.cookie.split(\";\");\n      for (let i = 0; i < cookies.length; i++) {\n        const cookie = cookies[i].trim();\n        // Does this cookie string begin with the name we want?\n        if (cookie.substring(0, name.length + 1) === name + \"=\") {\n          cookieValue = decodeURIComponent(cookie.substring(name.length + 1));\n          break;\n        }\n      }\n    }\n    return cookieValue;\n  };\n\n  return (\n    <form\n      className=\"js-validation-reminder\"\n      action=\"be_pages_auth_all.html\"\n      method=\"POST\"\n    >\n      {alert?.message && <Alert alert={alert} />}\n      <div className=\"form-group py-3\">\n        <input\n          type=\"text\"\n          className=\"form-control form-control-lg form-control-alt\"\n          id=\"reminder-credential\"\n          name=\"reminder-credential\"\n          placeholder=\"Username or Email\"\n          onChange={(e) => setEmail(e.target.value)}\n        />\n      </div>\n      <div className=\"form-group text-center\">\n        <button\n          type=\"submit\"\n          className=\"btn btn-block btn-hero-lg btn-hero-warning\"\n          onClick={handleSubmit}\n        >\n          <i className=\"fa fa-fw fa-reply mr-1\"></i> Reset Password\n        </button>\n        <p className=\"mt-3 mb-0 d-lg-flex justify-content-lg-between\">\n          <Link\n            to=\"/sign_in\"\n            className=\"btn btn-sm btn-light d-block d-lg-inline-block mb-1\"\n          >\n            <i className=\"fa fa-sign-in-alt text-muted mr-1\"></i>\n            Sign In\n          </Link>\n          <Link\n            to=\"/sign_up\"\n            className=\"btn btn-sm btn-light d-block d-lg-inline-block mb-1\"\n          >\n            <i className=\"fa fa-plus text-muted mr-1\"></i>\n            New Account\n          </Link>\n        </p>\n      </div>\n    </form>\n  );\n}\n\nexport default RequestPasswordResetToken;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}