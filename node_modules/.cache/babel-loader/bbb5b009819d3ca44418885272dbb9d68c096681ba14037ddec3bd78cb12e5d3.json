{"ast":null,"code":"import React from\"react\";import{useState}from\"react\";import{Link,useNavigate}from\"react-router-dom\";import Alert from\"./Alert\";import{useApiService}from\"../services/apiService\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function ChangePassword(_ref){let{passwordResetToken}=_ref;const apiService=useApiService();const[newPassword,setNewPassword]=useState(\"\");const[confirmPassword,setConfirmPassword]=useState(\"\");const[alert,setAlert]=useState({});const navigate=useNavigate();const handleSubmit=async e=>{e.preventDefault();if(!newPassword){setAlert({message:\"Please enter your password\",type:\"danger\"});return;}if(newPassword!==confirmPassword){setAlert({message:\"Passwords do not match\",type:\"danger\"});return;}try{const response=await apiService.resetPassword(passwordResetToken,newPassword,confirmPassword);console.log(\"Password changed successfully:\",response);setAlert({message:\"Password Changed successfully\",type:\"success\"});navigate(\"/sign_in\");}catch(error){setAlert({message:error.message||\"Password reset failed\",type:\"danger\"});console.error(\"Reset password error: \",error);}};return/*#__PURE__*/_jsxs(\"form\",{className:\"js-validation-reminder\",action:\"be_pages_auth_all.html\",method:\"POST\",children:[(alert===null||alert===void 0?void 0:alert.message)&&/*#__PURE__*/_jsx(Alert,{alert:alert}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group py-3\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control form-control-lg form-control-alt\",id:\"new-password\",name:\"new-password\",placeholder:\"New password\",onChange:e=>setNewPassword(e.target.value)})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group py-3\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control form-control-lg form-control-alt\",id:\"confirm-password\",name:\"confirm-password\",placeholder:\"Confirm password\",onChange:e=>setConfirmPassword(e.target.value)})}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group text-center\",children:[/*#__PURE__*/_jsxs(\"button\",{type:\"submit\",className:\"btn btn-block btn-hero-lg btn-hero-warning\",onClick:handleSubmit,children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-fw fa-reply mr-1\"}),\" Reset Password\"]}),/*#__PURE__*/_jsxs(\"p\",{className:\"mt-3 mb-0 d-lg-flex justify-content-lg-between\",children:[/*#__PURE__*/_jsxs(Link,{to:\"/sign_in\",className:\"btn btn-sm btn-light d-block d-lg-inline-block mb-1\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-sign-in-alt text-muted mr-1\"}),\"Sign In\"]}),/*#__PURE__*/_jsxs(Link,{to:\"/sign_up\",className:\"btn btn-sm btn-light d-block d-lg-inline-block mb-1\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-plus text-muted mr-1\"}),\"New Account\"]})]})]})]});}export default ChangePassword;","map":{"version":3,"names":["React","useState","Link","useNavigate","Alert","useApiService","jsx","_jsx","jsxs","_jsxs","ChangePassword","_ref","passwordResetToken","apiService","newPassword","setNewPassword","confirmPassword","setConfirmPassword","alert","setAlert","navigate","handleSubmit","e","preventDefault","message","type","response","resetPassword","console","log","error","className","action","method","children","id","name","placeholder","onChange","target","value","onClick","to"],"sources":["/Users/mahadasif/Desktop/file_bee/frontend/src/components/ChangePassword.jsx"],"sourcesContent":["import React from \"react\";\nimport { useState } from \"react\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport Alert from \"./Alert\";\nimport { useApiService } from \"../services/apiService\";\n\nfunction ChangePassword({ passwordResetToken }) {\n  const apiService = useApiService();\n\n  const [newPassword, setNewPassword] = useState(\"\");\n  const [confirmPassword, setConfirmPassword] = useState(\"\");\n  const [alert, setAlert] = useState({});\n\n  const navigate = useNavigate();\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n\n    if (!newPassword) {\n      setAlert({ message: \"Please enter your password\", type: \"danger\" });\n      return;\n    }\n\n    if (newPassword !== confirmPassword) {\n      setAlert({ message: \"Passwords do not match\", type: \"danger\" });\n      return;\n    }\n\n    try {\n      const response = await apiService.resetPassword(\n        passwordResetToken,\n        newPassword,\n        confirmPassword\n      );\n\n      console.log(\"Password changed successfully:\", response);\n      setAlert({ message: \"Password Changed successfully\", type: \"success\" });\n      navigate(\"/sign_in\");\n    } catch (error) {\n      setAlert({\n        message: error.message || \"Password reset failed\",\n        type: \"danger\",\n      });\n      console.error(\"Reset password error: \", error);\n    }\n  };\n\n  return (\n    <form\n      className=\"js-validation-reminder\"\n      action=\"be_pages_auth_all.html\"\n      method=\"POST\"\n    >\n      {alert?.message && <Alert alert={alert} />}\n      <div className=\"form-group py-3\">\n        <input\n          type=\"text\"\n          className=\"form-control form-control-lg form-control-alt\"\n          id=\"new-password\"\n          name=\"new-password\"\n          placeholder=\"New password\"\n          onChange={(e) => setNewPassword(e.target.value)}\n        />\n      </div>\n      <div className=\"form-group py-3\">\n        <input\n          type=\"text\"\n          className=\"form-control form-control-lg form-control-alt\"\n          id=\"confirm-password\"\n          name=\"confirm-password\"\n          placeholder=\"Confirm password\"\n          onChange={(e) => setConfirmPassword(e.target.value)}\n        />\n      </div>\n      <div className=\"form-group text-center\">\n        <button\n          type=\"submit\"\n          className=\"btn btn-block btn-hero-lg btn-hero-warning\"\n          onClick={handleSubmit}\n        >\n          <i className=\"fa fa-fw fa-reply mr-1\"></i> Reset Password\n        </button>\n        <p className=\"mt-3 mb-0 d-lg-flex justify-content-lg-between\">\n          <Link\n            to=\"/sign_in\"\n            className=\"btn btn-sm btn-light d-block d-lg-inline-block mb-1\"\n          >\n            <i className=\"fa fa-sign-in-alt text-muted mr-1\"></i>\n            Sign In\n          </Link>\n          <Link\n            to=\"/sign_up\"\n            className=\"btn btn-sm btn-light d-block d-lg-inline-block mb-1\"\n          >\n            <i className=\"fa fa-plus text-muted mr-1\"></i>\n            New Account\n          </Link>\n        </p>\n      </div>\n    </form>\n  );\n}\n\nexport default ChangePassword;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}