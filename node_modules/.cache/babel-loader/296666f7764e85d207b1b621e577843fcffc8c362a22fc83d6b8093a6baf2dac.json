{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useAuth } from \"../contexts/AuthContext\";\nconst API_BASE_URL = \"http://localhost:8000\";\nclass ApiService {\n  constructor() {\n    this.baseUrl = API_BASE_URL;\n  }\n  getToken() {\n    // This method will be overwritten with the actual token getter\n    return null;\n  }\n  async fetchWithAuth(endpoint, options = {}) {\n    const token = this.getToken();\n    const headers = {\n      Authorization: `Token ${token === null || token === void 0 ? void 0 : token.key}`,\n      ...options.headers\n    };\n    return this.fetchBase(endpoint, {\n      ...options,\n      headers\n    });\n  }\n  async fetchWithoutAuth(endpoint, options = {}) {\n    return this.fetchBase(endpoint, options);\n  }\n  async fetchBase(endpoint, options = {}) {\n    const response = await fetch(`${this.baseUrl}${endpoint}`, options);\n    if (!response.ok) {\n      const error = await response.json();\n      throw new Error(error.error || `HTTP error! Status: ${response.status}`);\n    }\n    console.log(response.json());\n    return response.json();\n  }\n  async getWithAuth(endpoint) {\n    return this.fetchWithAuth(endpoint, {\n      method: \"GET\"\n    });\n  }\n  async postWithAuth(endpoint, data) {\n    return this.fetchWithAuth(endpoint, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(data)\n    });\n  }\n  async postWithoutAuth(endpoint, data) {\n    return this.fetchWithoutAuth(endpoint, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(data)\n    });\n  }\n  async deleteWithAuth(endpoint) {\n    return this.fetchWithAuth(endpoint, {\n      method: \"DELETE\"\n    });\n  }\n  async postFormDataWithAuth(endpoint, formData) {\n    return this.fetchWithAuth(endpoint, {\n      method: \"POST\",\n      body: formData\n    });\n  }\n  async postFormDataWithoutAuth(endpoint, formData) {\n    return this.fetchWithoutAuth(endpoint, {\n      method: \"POST\",\n      body: formData\n    });\n  }\n\n  // Specific API methods\n  async fetchSupportedMimetypes() {\n    return this.getWithAuth(\"/target_conversions/\");\n  }\n  async convertFile(file, targetMimetype) {\n    const formData = new FormData();\n    formData.append(\"original_file\", file);\n    formData.append(\"converted_mimetype\", targetMimetype);\n    return this.postFormDataWithAuth(\"/\", formData);\n  }\n  async resetPassword(passwordResetToken, newPassword, confirmPassword) {\n    const formData = {\n      token: passwordResetToken,\n      password: newPassword,\n      confirm_password: confirmPassword\n    };\n    return this.postWithoutAuth(\"/api/user/reset_password/\", formData);\n  }\n  async updateUserProfile(userData) {\n    return this.postWithAuth(\"/api/user/profile\", userData);\n  }\n  async deleteAccount() {\n    const response = this.deleteWithAuth(\"/api/user/delete_account\");\n    return response.json();\n  }\n}\nexport const apiService = new ApiService();\nexport const useApiService = () => {\n  _s();\n  const {\n    token\n  } = useAuth();\n  apiService.getToken = () => token;\n  return apiService;\n};\n_s(useApiService, \"ZpOvj47KCDv4EW5BIUHQHDAsr3M=\", false, function () {\n  return [useAuth];\n});","map":{"version":3,"names":["useAuth","API_BASE_URL","ApiService","constructor","baseUrl","getToken","fetchWithAuth","endpoint","options","token","headers","Authorization","key","fetchBase","fetchWithoutAuth","response","fetch","ok","error","json","Error","status","console","log","getWithAuth","method","postWithAuth","data","body","JSON","stringify","postWithoutAuth","deleteWithAuth","postFormDataWithAuth","formData","postFormDataWithoutAuth","fetchSupportedMimetypes","convertFile","file","targetMimetype","FormData","append","resetPassword","passwordResetToken","newPassword","confirmPassword","password","confirm_password","updateUserProfile","userData","deleteAccount","apiService","useApiService","_s"],"sources":["/Users/mahadasif/Desktop/file_bee/frontend/src/services/apiService.js"],"sourcesContent":["import { useAuth } from \"../contexts/AuthContext\";\n\nconst API_BASE_URL = \"http://localhost:8000\";\n\nclass ApiService {\n  constructor() {\n    this.baseUrl = API_BASE_URL;\n  }\n\n  getToken() {\n    // This method will be overwritten with the actual token getter\n    return null;\n  }\n\n  async fetchWithAuth(endpoint, options = {}) {\n    const token = this.getToken();\n    const headers = {\n      Authorization: `Token ${token?.key}`,\n      ...options.headers,\n    };\n    return this.fetchBase(endpoint, { ...options, headers });\n  }\n\n  async fetchWithoutAuth(endpoint, options = {}) {\n    return this.fetchBase(endpoint, options);\n  }\n\n  async fetchBase(endpoint, options = {}) {\n    const response = await fetch(`${this.baseUrl}${endpoint}`, options);\n    if (!response.ok) {\n      const error = await response.json();\n      throw new Error(error.error || `HTTP error! Status: ${response.status}`);\n    }\n    console.log(response.json());\n    return response.json();\n  }\n\n  async getWithAuth(endpoint) {\n    return this.fetchWithAuth(endpoint, { method: \"GET\" });\n  }\n\n  async postWithAuth(endpoint, data) {\n    return this.fetchWithAuth(endpoint, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify(data),\n    });\n  }\n\n  async postWithoutAuth(endpoint, data) {\n    return this.fetchWithoutAuth(endpoint, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify(data),\n    });\n  }\n\n  async deleteWithAuth(endpoint) {\n    return this.fetchWithAuth(endpoint, { method: \"DELETE\" });\n  }\n\n  async postFormDataWithAuth(endpoint, formData) {\n    return this.fetchWithAuth(endpoint, {\n      method: \"POST\",\n      body: formData,\n    });\n  }\n\n  async postFormDataWithoutAuth(endpoint, formData) {\n    return this.fetchWithoutAuth(endpoint, {\n      method: \"POST\",\n      body: formData,\n    });\n  }\n\n  // Specific API methods\n  async fetchSupportedMimetypes() {\n    return this.getWithAuth(\"/target_conversions/\");\n  }\n\n  async convertFile(file, targetMimetype) {\n    const formData = new FormData();\n    formData.append(\"original_file\", file);\n    formData.append(\"converted_mimetype\", targetMimetype);\n    return this.postFormDataWithAuth(\"/\", formData);\n  }\n\n  async resetPassword(passwordResetToken, newPassword, confirmPassword) {\n    const formData = {\n      token: passwordResetToken,\n      password: newPassword,\n      confirm_password: confirmPassword,\n    };\n\n    return this.postWithoutAuth(\"/api/user/reset_password/\", formData);\n  }\n\n  async updateUserProfile(userData) {\n    return this.postWithAuth(\"/api/user/profile\", userData);\n  }\n\n  async deleteAccount() {\n    const response = this.deleteWithAuth(\"/api/user/delete_account\");\n    return response.json();\n  }\n}\n\nexport const apiService = new ApiService();\n\nexport const useApiService = () => {\n  const { token } = useAuth();\n  apiService.getToken = () => token;\n  return apiService;\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}