{"ast":null,"code":"import React,{useState}from\"react\";import{useAuth}from\"../contexts/AuthContext\";import{useApiService}from\"../services/apiService\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const HelpRequest=()=>{var _formData$attachment;const{user}=useAuth();const apiService=useApiService();const[message,setMessage]=useState(\"\");const[formData,setFormData]=useState({email:(user===null||user===void 0?void 0:user.email)||\"\",subject:\"\",description:\"\",attachment:null});const navigate=useNavigate();const handleInputChange=e=>{const{name,value,files}=e.target;if(name===\"attachment\"){setFormData(prevState=>({...prevState,[name]:files[0]}));}else{setFormData(prevState=>({...prevState,[name]:value}));}};const handleSubmit=async e=>{e.preventDefault();try{console.log(formData);const response=await apiService.submitHelpRequest(formData);console.log(\"response: \",response);setMessage(\"Help request submitted successfully!\");navigate(\"/help\");}catch(error){var _error$response,_error$response$data;setMessage(\"Error: \".concat(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||\"Failed to submit request\"));}};return/*#__PURE__*/_jsxs(\"main\",{id:\"main-container\",children:[message&&/*#__PURE__*/_jsx(\"div\",{className:\"alert \".concat(message.includes(\"Error\")?\"alert-danger\":\"alert-success\"),role:\"alert\",children:message}),/*#__PURE__*/_jsx(\"div\",{className:\"content w-50\",children:/*#__PURE__*/_jsx(\"div\",{className:\"block block-rounded block-bordered\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"block mb-0\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"block-content block-content-sm block-content-full bg-body\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-uppercase font-size-sm font-w700\",children:\"Submit request\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"block-content block-content-full\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",children:\"Email address\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",className:\"form-control\",id:\"email\",name:\"email\",value:formData.email,onChange:handleInputChange,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"subject\",children:\"Subject\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",id:\"subject\",name:\"subject\",value:formData.subject,onChange:handleInputChange,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"description\",children:\"Description\"}),/*#__PURE__*/_jsx(\"textarea\",{className:\"form-control\",id:\"description\",name:\"description\",value:formData.description,onChange:handleInputChange,required:true}),/*#__PURE__*/_jsx(\"small\",{children:\"Please enter the details of your request. A member of our support team will respond as soon as possible.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"attachment\",children:\"Attachment\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"custom-file\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",className:\"custom-file-input\",\"data-toggle\":\"custom-file-input\",id:\"attachment\",name:\"attachment\",onChange:handleInputChange}),/*#__PURE__*/_jsx(\"label\",{className:\"custom-file-label\",for:\"attachment\",children:((_formData$attachment=formData.attachment)===null||_formData$attachment===void 0?void 0:_formData$attachment.name)||\"Choose file\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"block-content row justify-content-center border-top\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-6 mb-1\",children:/*#__PURE__*/_jsxs(\"button\",{type:\"submit\",className:\"btn btn-block btn-hero-primary\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-fw fa-save mr-1\"}),\" Submit\"]})})})]})})]})})})]});};export default HelpRequest;","map":{"version":3,"names":["React","useState","useAuth","useApiService","useNavigate","jsx","_jsx","jsxs","_jsxs","HelpRequest","_formData$attachment","user","apiService","message","setMessage","formData","setFormData","email","subject","description","attachment","navigate","handleInputChange","e","name","value","files","target","prevState","handleSubmit","preventDefault","console","log","response","submitHelpRequest","error","_error$response","_error$response$data","concat","data","id","children","className","includes","role","onSubmit","htmlFor","type","onChange","required","for"],"sources":["/Users/mahadasif/Desktop/file_bee/frontend/src/pages/HelpRequest.jsx"],"sourcesContent":["import React, { useState } from \"react\";\nimport { useAuth } from \"../contexts/AuthContext\";\nimport { useApiService } from \"../services/apiService\";\nimport { useNavigate } from \"react-router-dom\";\n\nconst HelpRequest = () => {\n  const { user } = useAuth();\n  const apiService = useApiService();\n  const [message, setMessage] = useState(\"\");\n  const [formData, setFormData] = useState({\n    email: user?.email || \"\",\n    subject: \"\",\n    description: \"\",\n    attachment: null,\n  });\n  const navigate = useNavigate();\n\n  const handleInputChange = (e) => {\n    const { name, value, files } = e.target;\n    if (name === \"attachment\") {\n      setFormData((prevState) => ({\n        ...prevState,\n        [name]: files[0],\n      }));\n    } else {\n      setFormData((prevState) => ({\n        ...prevState,\n        [name]: value,\n      }));\n    }\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    try {\n      console.log(formData);\n\n      const response = await apiService.submitHelpRequest(formData);\n\n      console.log(\"response: \", response);\n      setMessage(\"Help request submitted successfully!\");\n      navigate(\"/help\");\n    } catch (error) {\n      setMessage(\n        `Error: ${error.response?.data?.message || \"Failed to submit request\"}`\n      );\n    }\n  };\n\n  return (\n    <main id=\"main-container\">\n      {message && (\n        <div\n          className={`alert ${\n            message.includes(\"Error\") ? \"alert-danger\" : \"alert-success\"\n          }`}\n          role=\"alert\"\n        >\n          {message}\n        </div>\n      )}\n      <div className=\"content w-50\">\n        <div className=\"block block-rounded block-bordered\">\n          <div className=\"block mb-0\">\n            <div className=\"block-content block-content-sm block-content-full bg-body\">\n              <span className=\"text-uppercase font-size-sm font-w700\">\n                Submit request\n              </span>\n            </div>\n            <div className=\"block-content block-content-full\">\n              <form onSubmit={handleSubmit}>\n                <div className=\"form-group\">\n                  <label htmlFor=\"email\">Email address</label>\n                  <input\n                    type=\"email\"\n                    className=\"form-control\"\n                    id=\"email\"\n                    name=\"email\"\n                    value={formData.email}\n                    onChange={handleInputChange}\n                    required\n                  />\n                </div>\n                <div className=\"form-group\">\n                  <label htmlFor=\"subject\">Subject</label>\n                  <input\n                    type=\"text\"\n                    className=\"form-control\"\n                    id=\"subject\"\n                    name=\"subject\"\n                    value={formData.subject}\n                    onChange={handleInputChange}\n                    required\n                  />\n                </div>\n                <div className=\"form-group\">\n                  <label htmlFor=\"description\">Description</label>\n                  <textarea\n                    className=\"form-control\"\n                    id=\"description\"\n                    name=\"description\"\n                    value={formData.description}\n                    onChange={handleInputChange}\n                    required\n                  />\n                  <small>\n                    Please enter the details of your request. A member of our\n                    support team will respond as soon as possible.\n                  </small>\n                </div>\n                <div className=\"form-group\">\n                  <label htmlFor=\"attachment\">Attachment</label>\n                  <div className=\"custom-file\">\n                    <input\n                      type=\"file\"\n                      className=\"custom-file-input\"\n                      data-toggle=\"custom-file-input\"\n                      id=\"attachment\"\n                      name=\"attachment\"\n                      onChange={handleInputChange}\n                    />\n                    <label className=\"custom-file-label\" for=\"attachment\">\n                      {formData.attachment?.name || \"Choose file\"}\n                    </label>\n                  </div>\n                </div>\n                <div className=\"block-content row justify-content-center border-top\">\n                  <div className=\"col-6 mb-1\">\n                    <button\n                      type=\"submit\"\n                      className=\"btn btn-block btn-hero-primary\"\n                    >\n                      <i className=\"fa fa-fw fa-save mr-1\"></i> Submit\n                    </button>\n                  </div>\n                </div>\n              </form>\n            </div>\n          </div>\n        </div>\n      </div>\n    </main>\n  );\n};\n\nexport default HelpRequest;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}